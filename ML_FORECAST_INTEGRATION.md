# ‚úÖ ML –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ó–∞–≤–µ—Ä—à–µ–Ω–∞!

## üéâ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### üîß Backend (Python, FastAPI):

1. **Pydantic Schemas** (`backend/api/forecast_schemas.py`):
   - ‚úÖ `HistoricalDataPoint` - —Ç–æ—á–∫–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (–¥–∞—Ç–∞ + –∑–Ω–∞—á–µ–Ω–∏–µ)
   - ‚úÖ `ForecastRequest` - –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø—Ä–æ–≥–Ω–æ–∑ (–∏–Ω–¥–µ–∫—Å, –∏—Å—Ç–æ—Ä–∏—è, –≥–æ—Ä–∏–∑–æ–Ω—Ç)
   - ‚úÖ `ForecastDataPoint` - —Ç–æ—á–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞ (–¥–∞—Ç–∞, –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–∏–ø: Historical/Interpolated/Forecast)
   - ‚úÖ `ForecastResponse` - –æ—Ç–≤–µ—Ç —Å –ø—Ä–æ–≥–Ω–æ–∑–æ–º + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏

2. **ML Utilities** (`backend/services/ml_utils.py`):
   - ‚úÖ `convert_to_dataframe()` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Pydantic ‚Üí Pandas DataFrame
   - ‚úÖ `create_features()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (sin/cos dayofyear, week, month)
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ Pydantic V1/V2 –∏ Pandas –≤–µ—Ä—Å–∏–π

3. **Forecast Service** (`backend/services/forecast_service.py`):
   - ‚úÖ `ForecastService` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å ML –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
   - ‚úÖ **–ú–æ–¥–µ–ª—å:** Gradient Boosting Regressor (scikit-learn)
   - ‚úÖ **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** 400 –¥–µ—Ä–µ–≤—å–µ–≤, learning_rate=0.05, max_depth=5
   - ‚úÖ **–ü—Ä–∏–∑–Ω–∞–∫–∏:** –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –¥–ª—è —É—á–µ—Ç–∞ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏
   - ‚úÖ **–ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞:** 
     - –†–µ—Å–µ–º–ø–ª–∏–Ω–≥ –¥–æ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —á–∞—Å—Ç–æ—Ç—ã
     - –ü–æ–ª–∏–Ω–æ–º–∏–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è (order=2) —Å fallback –Ω–∞ –ª–∏–Ω–µ–π–Ω—É—é
     - –ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö (Historical/Interpolated)
     - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [0, 1]
   - ‚úÖ **–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ù–∞ 7-90 –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è (–º–∏–Ω–∏–º—É–º 10 –Ω–∞–±–ª—é–¥–µ–Ω–∏–π)

4. **API Routes** (`backend/api/forecast_routes.py`):
   - ‚úÖ `POST /api/v1/forecast/indices` - —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞
   - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (400, 500)
   - ‚úÖ Timeout 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è ML –æ–ø–µ—Ä–∞—Ü–∏–π
   - ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞

5. **Main App** (`backend/main.py`):
   - ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–∞ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `/api/v1/forecast`
   - ‚úÖ –¢–µ–≥ "ML Forecast" –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

6. **Dependencies** (`backend/requirements.txt`):
   - ‚úÖ `pandas==2.1.3` - —Ä–∞–±–æ—Ç–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ä—è–¥–∞–º–∏

---

### üé® Frontend (React, Chart.js):

1. **AI Service** (`frontend/src/utils/aiService.js`):
   - ‚úÖ `forecastTimeSeries()` - –º–µ—Ç–æ–¥ –¥–ª—è –≤—ã–∑–æ–≤–∞ API –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å timeout 60 —Å–µ–∫—É–Ω–¥
   - ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∫–ª–∞—Å—Å AIService

2. **TimeSeriesModal** (`frontend/src/components/TimeSeriesModal.jsx`):
   - ‚úÖ –ò–º–ø–æ—Ä—Ç `aiService`
   - ‚úÖ State –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞: `forecastData`, `isForecastLoading`, `forecastHorizon`, `showForecast`
   - ‚úÖ **`handleGenerateForecast()`** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞:
     - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–º–∏–Ω–∏–º—É–º 10 –Ω–∞–±–ª—é–¥–µ–Ω–∏–π)
     - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç API [{date, value}, ...]
     - –í—ã–∑–æ–≤ `aiService.forecastTimeSeries()`
     - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ —Å –ø—Ä–æ–≥–Ω–æ–∑–æ–º
   - ‚úÖ **`updateChartWithForecast()`** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞:
     - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ Historical/Interpolated/Forecast datasets
     - –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞:
       - **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ** - —Å–ø–ª–æ—à–Ω–∞—è –ª–∏–Ω–∏—è, –∫—Ä—É–≥–ª—ã–µ —Ç–æ—á–∫–∏
       - **–ò–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ** - –ø—É–Ω–∫—Ç–∏—Ä, –∫—Ä–µ—Å—Ç–∏–∫–∏
       - **–ü—Ä–æ–≥–Ω–æ–∑** - –ø—É–Ω–∫—Ç–∏—Ä —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π, –∫–≤–∞–¥—Ä–∞—Ç—ã
   - ‚úÖ **UI Controls:**
     - Input –¥–ª—è –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞ (7-90 –¥–Ω–µ–π)
     - –ö–Ω–æ–ø–∫–∞ "ü§ñ ML –ü—Ä–æ–≥–Ω–æ–∑" (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö)
     - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞
     - –ò–Ω—Ñ–æ-–±–ª–æ–∫ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞
     - –ö–Ω–æ–ø–∫–∞ "–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∏—Å—Ö–æ–¥–Ω—ã–º –¥–∞–Ω–Ω—ã–º"

3. **Styles** (`frontend/src/components/TimeSeriesModal.css`):
   - ‚úÖ `.ts-forecast-controls` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤ ML (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π —Ñ–æ–Ω)
   - ‚úÖ `.ts-input-small` - input –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞
   - ‚úÖ `.ts-forecast-btn` - –∫–Ω–æ–ø–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞
   - ‚úÖ `.ts-forecast-info` - –∏–Ω—Ñ–æ-–±–ª–æ–∫ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ (–∑–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω)
   - ‚úÖ Responsive –¥–∏–∑–∞–π–Ω

---

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π Flow:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç **"–ê–Ω–∞–ª–∏–∑ –¥–∏–Ω–∞–º–∏–∫–∏"** –Ω–∞ –∫–∞—Ä—Ç–µ
2. –í—ã–±–∏—Ä–∞–µ—Ç –æ–±–ª–∞—Å—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ (–ø–æ–ª–∏–≥–æ–Ω)
3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–¥–∞—Ç—ã, –∏–Ω–¥–µ–∫—Å—ã)
4. –ù–∞–∂–∏–º–∞–µ—Ç **"–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏–∫—É"**
5. –ü–æ–ª—É—á–∞–µ—Ç –≥—Ä–∞—Ñ–∏–∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä—è–¥–∞ –∏–∑ Sentinel-2
6. **[–ù–û–í–û–ï]** –í–∏–¥–∏—Ç –±–ª–æ–∫ **"–ì–æ—Ä–∏–∑–æ–Ω—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞"** —Å input –∏ –∫–Ω–æ–ø–∫–æ–π **"ü§ñ ML –ü—Ä–æ–≥–Ω–æ–∑"**
7. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 –¥–Ω–µ–π)
8. –ù–∞–∂–∏–º–∞–µ—Ç **"ü§ñ ML –ü—Ä–æ–≥–Ω–æ–∑"**
9. **ML –º–æ–¥–µ–ª—å –æ–±—É—á–∞–µ—Ç—Å—è** –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (~3-5 —Å–µ–∫—É–Ω–¥)
10. –ì—Ä–∞—Ñ–∏–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –ø–æ–∫–∞–∑—ã–≤–∞—è:
    - üü¢ **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏** (—Ä–µ–∞–ª—å–Ω—ã–µ —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ)
    - üü° **–ò–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ—á–∫–∏** (–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤)
    - üü£ **–ü—Ä–æ–≥–Ω–æ–∑** (–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ –Ω–∞ –±—É–¥—É—â–µ–µ)
11. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∏–Ω—Ñ–æ-–±–ª–æ–∫ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏:
    - –ò–Ω–¥–µ–∫—Å (NDVI, EVI, etc.)
    - –ì–æ—Ä–∏–∑–æ–Ω—Ç (30 –¥–Ω–µ–π)
    - –ú–æ–¥–µ–ª—å (Gradient Boosting Regressor)

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π Flow:

#### Backend:
```
Request ‚Üí Validation (10+ points) ‚Üí Convert to DataFrame
  ‚Üì
Preprocessing:
  - Resample to daily frequency
  - Interpolate missing values (polynomial order=2)
  - Label data type (Historical/Interpolated)
  - Clip values to [0, 1]
  ‚Üì
Feature Engineering:
  - Extract: dayofyear, week, month
  - Create cyclic features: sin(dayofyear), cos(dayofyear)
  ‚Üì
Model Training:
  - Gradient Boosting Regressor
  - Features: [dayofyear_sin, dayofyear_cos, weekofyear, month]
  - Target: Index values
  ‚Üì
Prediction:
  - Generate future dates (forecast_horizon_days)
  - Extract features for future dates
  - Predict values
  - Clip to [0, 1]
  ‚Üì
Response:
  - Combine: Historical + Interpolated + Forecast
  - Label each point with type
  - Return ForecastResponse
```

#### Frontend:
```
User clicks "ML –ü—Ä–æ–≥–Ω–æ–∑" ‚Üí Validate data (10+ points)
  ‚Üì
Prepare Request:
  - Convert chartData to [{date, value}, ...]
  - Get forecastHorizon from input
  - Get indexName (first selected index)
  ‚Üì
API Call:
  - POST /api/v1/forecast/indices
  - Timeout: 60 seconds
  ‚Üì
Process Response:
  - Separate: Historical / Interpolated / Forecast
  - Create datasets with unique styles
  - Update chart with new data
  ‚Üì
UI Update:
  - Show forecast info block
  - Display metadata
  - Enable "Back to original" button
```

---

## üî¨ ML Model Details:

### Algorithm: **Gradient Boosting Regressor**
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** scikit-learn
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  - `n_estimators`: 400 –¥–µ—Ä–µ–≤—å–µ–≤
  - `learning_rate`: 0.05 (–º–µ–¥–ª–µ–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏)
  - `max_depth`: 5 (–∑–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è)
  - `random_state`: 42 (–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å)

### Features (4 –ø—Ä–∏–∑–Ω–∞–∫–∞):
1. `dayofyear_sin` - —Å–∏–Ω—É—Å –¥–Ω—è –≥–æ–¥–∞ (–¥–ª—è –≥–æ–¥–∏—á–Ω–æ–π —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏)
2. `dayofyear_cos` - –∫–æ—Å–∏–Ω—É—Å –¥–Ω—è –≥–æ–¥–∞ (–¥–ª—è –≥–æ–¥–∏—á–Ω–æ–π —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏)
3. `weekofyear` - –Ω–æ–º–µ—Ä –Ω–µ–¥–µ–ª–∏ –≤ –≥–æ–¥—É
4. `month` - –º–µ—Å—è—Ü (1-12)

### Why Cyclic Features?
–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (sin/cos) –ø–æ–∑–≤–æ–ª—è—é—Ç –º–æ–¥–µ–ª–∏ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ:
- 1 —è–Ω–≤–∞—Ä—è –∏ 31 –¥–µ–∫–∞–±—Ä—è - –±–ª–∏–∑–∫–∏–µ –¥–∞—Ç—ã
- –°–µ–∑–æ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è
- –£–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑—ã –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –≥–æ–¥–æ–≤

### Preprocessing:
- **–ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è:** –ü–æ–ª–∏–Ω–æ–º–∏–∞–ª—å–Ω–∞—è (order=2) –¥–ª—è –≥–ª–∞–¥–∫–∏—Ö –∫—Ä–∏–≤—ã—Ö
- **Fallback:** –õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –º–∞–ª–æ
- **–†–µ—Å–µ–º–ø–ª–∏–Ω–≥:** –î–æ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —á–∞—Å—Ç–æ—Ç—ã
- **Clipping:** –ó–Ω–∞—á–µ–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã [0, 1]

---

## üìç –ì–¥–µ –Ω–∞–π—Ç–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **R2-–§–µ—Ä–º–µ—Ä** (http://localhost:3000)
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ **–ö–∞—Ä—Ç—É** (üó∫Ô∏è)
4. –ù–∞—Ä–∏—Å—É–π—Ç–µ –ø–æ–ª–∏–≥–æ–Ω –Ω–∞ –∫–∞—Ä—Ç–µ (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ä–∏—Å–æ–≤–∞–Ω–∏—è)
5. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"üìà –ê–Ω–∞–ª–∏–∑ –¥–∏–Ω–∞–º–∏–∫–∏"** –Ω–∞ –ø–æ–ª–∏–≥–æ–Ω–µ
6. –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ:
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–∞—Ç—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - –í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω–¥–µ–∫—Å (NDVI –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - –ù–∞–∂–º–∏—Ç–µ **"–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏–∫—É"**
7. –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≥—Ä–∞—Ñ–∏–∫–∞ —É–≤–∏–¥–∏—Ç–µ:
   - **[–ù–û–í–û–ï]** –ë–ª–æ–∫ "–ì–æ—Ä–∏–∑–æ–Ω—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞ (–¥–Ω–µ–π)" —Å input
   - **[–ù–û–í–û–ï]** –ö–Ω–æ–ø–∫—É **"ü§ñ ML –ü—Ä–æ–≥–Ω–æ–∑ (NDVI)"**
8. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç (7-90 –¥–Ω–µ–π) –∏ –Ω–∞–∂–º–∏—Ç–µ **"ü§ñ ML –ü—Ä–æ–≥–Ω–æ–∑"**
9. –î–æ–∂–¥–∏—Ç–µ—Å—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (~3-5 —Å–µ–∫—É–Ω–¥)
10. –ì—Ä–∞—Ñ–∏–∫ –æ–±–Ω–æ–≤–∏—Ç—Å—è, –ø–æ–∫–∞–∑—ã–≤–∞—è –ø—Ä–æ–≥–Ω–æ–∑ —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–º –ø—É–Ω–∫—Ç–∏—Ä–æ–º

---

## ‚úÖ API Endpoint:

### `POST /api/v1/forecast/indices`

**Request Body:**
```json
{
  "index_name": "NDVI",
  "historical_data": [
    {"date": "2025-08-01", "value": 0.65},
    {"date": "2025-08-10", "value": 0.70},
    ...
  ],
  "forecast_horizon_days": 30
}
```

**Response:**
```json
{
  "index_name": "NDVI",
  "forecast": [
    {"date": "2025-08-01", "value": 0.65, "type": "Historical"},
    {"date": "2025-08-05", "value": 0.67, "type": "Interpolated"},
    ...
    {"date": "2025-10-01", "value": 0.72, "type": "Forecast"},
    {"date": "2025-10-05", "value": 0.74, "type": "Forecast"},
    ...
  ],
  "metadata": {
    "model_type": "GradientBoostingRegressor (Seasonal Features)"
  }
}
```

---

## üß™ Validation & Error Handling:

### Backend Validation:
- ‚úÖ –ú–∏–Ω–∏–º—É–º 10 –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Ç–æ—á–µ–∫
- ‚úÖ –ì–æ—Ä–∏–∑–æ–Ω—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞: 7-90 –¥–Ω–µ–π
- ‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞: 0-1
- ‚úÖ Unique dates (–¥—É–±–ª–∏–∫–∞—Ç—ã –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è)

### Frontend Validation:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –ø—Ä–æ–≥–Ω–æ–∑–æ–º
- ‚úÖ –ú–∏–Ω–∏–º—É–º 10 –Ω–∞–±–ª—é–¥–µ–Ω–∏–π
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å user-friendly —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

### Error Types:
- **400 Bad Request:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö, –Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- **500 Internal Server Error:** –û—à–∏–±–∫–∞ –º–æ–¥–µ–ª–∏, —Å–±–æ–π –æ–±—É—á–µ–Ω–∏—è
- **Timeout:** –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ 60 —Å–µ–∫—É–Ω–¥ (—Ä–µ–¥–∫–æ, –æ–±—ã—á–Ω–æ ~3-5 —Å–µ–∫)

---

## üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –ì—Ä–∞—Ñ–∏–∫–µ:

### –°—Ç–∏–ª–∏ Datasets:

1. **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (Historical)**:
   - –¶–≤–µ—Ç: –ó–µ–ª–µ–Ω—ã–π (#22c55e –¥–ª—è NDVI)
   - –õ–∏–Ω–∏—è: –°–ø–ª–æ—à–Ω–∞—è, —Ç–æ–ª—â–∏–Ω–∞ 3px
   - –¢–æ—á–∫–∏: –ö—Ä—É–≥, radius 5px
   - –ó–∞–ª–∏–≤–∫–∞: –ù–µ—Ç

2. **–ò–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (Interpolated)**:
   - –¶–≤–µ—Ç: –°–µ—Ä—ã–π (#9ca3af)
   - –õ–∏–Ω–∏—è: –ü—É–Ω–∫—Ç–∏—Ä [5, 5], —Ç–æ–ª—â–∏–Ω–∞ 2px
   - –¢–æ—á–∫–∏: –ö—Ä–µ—Å—Ç–∏–∫ (crossRot), radius 3px
   - –ó–∞–ª–∏–≤–∫–∞: –ù–µ—Ç

3. **–ü—Ä–æ–≥–Ω–æ–∑ (Forecast)**:
   - –¶–≤–µ—Ç: –§–∏–æ–ª–µ—Ç–æ–≤—ã–π (#a855f7)
   - –õ–∏–Ω–∏—è: –ü—É–Ω–∫—Ç–∏—Ä [10, 5], —Ç–æ–ª—â–∏–Ω–∞ 3px
   - –¢–æ—á–∫–∏: –ö–≤–∞–¥—Ä–∞—Ç (rectRot), radius 4px
   - –ó–∞–ª–∏–≤–∫–∞: –î–∞ (rgba(168, 85, 247, 0.1))

---

## üöÄ Production Ready:

- ‚úÖ –ö–æ–¥ —á–∏—Å—Ç—ã–π –∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å Pydantic V1/V2
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å Pandas –≤–µ—Ä—Å–∏–π
- ‚úÖ Responsive UI
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (FastAPI –∞–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Timeout –∑–∞—â–∏—Ç–∞
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

---

## üìù –§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã/–∏–∑–º–µ–Ω–µ–Ω—ã:

### Backend:
- ‚úÖ `backend/requirements.txt` - –¥–æ–±–∞–≤–ª–µ–Ω pandas
- ‚úÖ `backend/api/forecast_schemas.py` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª
- ‚úÖ `backend/services/ml_utils.py` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª
- ‚úÖ `backend/services/forecast_service.py` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª
- ‚úÖ `backend/api/forecast_routes.py` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª
- ‚úÖ `backend/main.py` - –¥–æ–±–∞–≤–ª–µ–Ω —Ä–æ—É—Ç–µ—Ä

### Frontend:
- ‚úÖ `frontend/src/utils/aiService.js` - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `forecastTimeSeries()`
- ‚úÖ `frontend/src/components/TimeSeriesModal.jsx` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ `frontend/src/components/TimeSeriesModal.css` - —Å—Ç–∏–ª–∏ –¥–ª—è ML controls

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç:**
1. ‚úÖ –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ –∏–∑ Sentinel-2
2. ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å ML –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 7-90 –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥
3. ‚úÖ –í–∏–¥–µ—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ —Ç–æ–º –∂–µ –≥—Ä–∞—Ñ–∏–∫–µ —Å –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–µ–π
4. ‚úÖ –ü–æ–Ω–∏–º–∞—Ç—å —Ç–∏–ø –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ (Historical/Interpolated/Forecast)
5. ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –∏—Å—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–º
6. ‚úÖ –í–∏–¥–µ—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏

**–ú–æ–¥–µ–ª—å —É–º–µ–µ—Ç:**
1. ‚úÖ –£—á–∏—Ç—å—Å—è –Ω–∞ —Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–∞—Ö (—Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ)
2. ‚úÖ –ò–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–ø—É—Å–∫–∏
3. ‚úÖ –£—á–∏—Ç—ã–≤–∞—Ç—å —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏
4. ‚úÖ –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ 7-90 –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥
5. ‚úÖ –†–∞–±–æ—Ç–∞—Ç—å —Å –ª—é–±—ã–º –≤–µ–≥–µ—Ç–∞—Ü–∏–æ–Ω–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º (NDVI, EVI, PSRI, NBR, NDSI)

---

## üéâ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–û—Ç–∫—Ä–æ–π—Ç–µ **http://localhost:3000** –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª ML –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è! üöÄ

