# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–æ–ª–≥–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–∏–Ω–∞–º–∏–∫–∏

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ "–ê–Ω–∞–ª–∏–∑ –¥–∏–Ω–∞–º–∏–∫–∏" –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—á–µ–Ω—å –¥–æ–ª–≥–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑-–∑–∞:

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞—Ç** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –≤—ã–±—Ä–∞—Ç—å –¥–∞—Ç—ã –¥–æ 2015 –≥–æ–¥–∞ (–∫–æ–≥–¥–∞ Sentinel-2 –µ—â–µ –Ω–µ –±—ã–ª –∑–∞–ø—É—â–µ–Ω)
2. **–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –¥–∞—Ç** - —Å–∏—Å—Ç–µ–º–∞ –ø—ã—Ç–∞–ª–∞—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–∏–æ–¥–∞ 2011-2012 –≥–æ–¥–æ–≤
3. **–ú–Ω–æ–∂–µ—Å—Ç–≤–æ retry-–∑–∞–ø—Ä–æ—Å–æ–≤** - –¥–ª—è –∫–∞–∂–¥–æ–π –¥–∞—Ç—ã –¥–µ–ª–∞–ª–æ—Å—å 2+ –∑–∞–ø—Ä–æ—Å–∞ –∫ API (–æ—Å–Ω–æ–≤–Ω–æ–π + retry)
4. **–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ç–æ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–∏ –±–æ–ª—å—à–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –¥–∞—Ç —Å–æ–∑–¥–∞–≤–∞–ª–æ—Å—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∏—Ç–µ—Ä–∞—Ü–∏–π

### –ü—Ä–∏–º–µ—Ä –∏–∑ –ª–æ–≥–æ–≤ (–ø—Ä–æ–±–ª–µ–º–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è):
```
INFO:services.sentinel_service:Fetching Sentinel-2 data for date range: ['2011-01-08', '2011-01-12']
INFO:services.sentinel_service:SCL histogram: {0: 262144}; valid_fraction=0.000
WARNING:services.sentinel_service:Retrying Process API with leastCC, expanded window and 80% cloud
INFO:services.sentinel_service:Retry SCL histogram: {0: 262144}; valid_fraction=0.000
WARNING:api.routes:No valid data for 2011-01-10
```

–î–ª—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –≤ 1 –≥–æ–¥ —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ **70+ –∑–∞–ø—Ä–æ—Å–∞–º –∫ API** –±–µ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞!

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. Backend –≤–∞–ª–∏–¥–∞—Ü–∏—è (`backend/api/routes.py`)

#### –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã:
```python
# Validate Sentinel-2 data availability (launched June 2015)
sentinel2_start = datetime(2015, 6, 23)
if start_date < sentinel2_start:
    raise HTTPException(
        status_code=400,
        detail=f"Sentinel-2 data is only available from 2015-06-23 onwards. Please select a start date after this."
    )
```

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ—á–µ–∫:
```python
# Limit maximum number of data points to 20 to prevent long processing
max_points = 20

if days_diff <= 30:
    interval = max(5, days_diff // max_points)  # Every 5 days minimum
elif days_diff <= 90:
    interval = max(10, days_diff // max_points)  # Every 10 days minimum
elif days_diff <= 180:
    interval = max(10, days_diff // max_points)  # Adaptive interval
else:
    interval = max(15, days_diff // max_points)  # Long ranges
```

#### –°—á–µ—Ç—á–∏–∫ —Ç–æ—á–µ–∫ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏–π:
```python
point_count = 0
while current_date <= end_date and point_count < max_points:
    # ... fetch data ...
    if index_value is not None and not np.isnan(index_value):
        dates.append(date_str)
        values.append(float(index_value))
        point_count += 1  # –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç —Å—á–µ—Ç—á–∏–∫–∞
```

### 2. Frontend –≤–∞–ª–∏–¥–∞—Ü–∏—è (`frontend/src/components/TimeSeriesChart.jsx`)

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã:
```javascript
// Validate Sentinel-2 availability (launched June 23, 2015)
const sentinel2Start = new Date('2015-06-23')
const selectedStart = new Date(startDate)

if (selectedStart < sentinel2Start) {
  setError('–î–∞–Ω–Ω—ã–µ Sentinel-2 –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ —Å 23 –∏—é–Ω—è 2015 –≥–æ–¥–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ–ª–µ–µ –ø–æ–∑–¥–Ω—é—é –¥–∞—Ç—É –Ω–∞—á–∞–ª–∞.')
  return
}
```

#### –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –±–æ–ª—å—à–∏—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–∞—Ö:
```javascript
// Warn if range is too large
const daysDiff = Math.floor((new Date(endDate) - new Date(startDate)) / (1000 * 60 * 60 * 24))
if (daysDiff > 365) {
  if (!window.confirm('–í—ã–±—Ä–∞–Ω –±–æ–ª—å—à–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç (>1 –≥–æ–¥–∞). –ê–Ω–∞–ª–∏–∑ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) {
    return
  }
}
```

#### HTML-–∞—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤—ã–±–æ—Ä–∞:
```javascript
<input
  type="date"
  value={startDate}
  onChange={(e) => setStartDate(e.target.value)}
  min="2015-06-23"  // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞
  max={endDate || undefined}
/>
```

#### –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞:
```javascript
<label>
  –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ 
  <span style={{fontSize: '11px', color: 'var(--text-secondary)'}}>
    (—Å 23.06.2015)
  </span>
</label>
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ –ª—é–±—ã—Ö –¥–∞—Ç (–≤–∫–ª—é—á–∞—è 2011 –≥–æ–¥)
- ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
- ‚ùå –ó–∞–≤–∏—Å–∞–Ω–∏—è –Ω–∞ 10+ –º–∏–Ω—É—Ç
- ‚ùå –ù–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –æ –ø—Ä–æ–±–ª–µ–º–µ

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç –Ω–∞ frontend –∏ backend
- ‚úÖ –ú–∞–∫—Å–∏–º—É–º 20 —Ç–æ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –±–æ–ª—å—à–∏—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–∞—Ö
- ‚úÖ –ß–µ—Ç–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –¥–∞—Ç–∞—Ö
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤—ã–±–æ—Ä–∫–∏
- ‚úÖ –í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞: 30 —Å–µ–∫—É–Ω–¥ - 5 –º–∏–Ω—É—Ç (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω–∞)

## üîÑ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: http://localhost:3000
2. **–ù–∞—Ä–∏—Å—É–π—Ç–µ –æ–±–ª–∞—Å—Ç—å** –Ω–∞ –∫–∞—Ä—Ç–µ
3. **–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑** –¥–æ "üìà –ê–Ω–∞–ª–∏–∑ –¥–∏–Ω–∞–º–∏–∫–∏"
4. **–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—ã** (–Ω–µ —Ä–∞–Ω—å—à–µ 23.06.2015!)
5. **–ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏–∫—É"**

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã:
- **–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç**: 1-3 –º–µ—Å—è—Ü–∞ (~30-60 —Å–µ–∫—É–Ω–¥)
- **–°–µ–∑–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑**: 3-6 –º–µ—Å—è—Ü–µ–≤ (~1-3 –º–∏–Ω—É—Ç—ã)
- **–ì–æ–¥–æ–≤–æ–π –æ–±–∑–æ—Ä**: 1 –≥–æ–¥ (~3-5 –º–∏–Ω—É—Ç)

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. `TIME_SERIES_GUIDE.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## üéØ –ò—Ç–æ–≥

–ü—Ä–æ–±–ª–µ–º–∞ **—Ä–µ—à–µ–Ω–∞**! –¢–µ–ø–µ—Ä—å:
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞—Ç—ã
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ –∏ –ø—Ä–∏–µ–º–ª–µ–º–æ

