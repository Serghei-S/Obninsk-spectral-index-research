# ‚úÖ –ê–Ω–∞–ª–∏–∑ –¥–∏–Ω–∞–º–∏–∫–∏ - –ü—Ä–æ–±–ª–µ–º–∞ –ò–°–ü–†–ê–í–õ–ï–ù–ê!

**–î–∞—Ç–∞**: 18 –æ–∫—Ç—è–±—Ä—è 2025  
**–û—à–∏–±–∫–∞**: `ERR_CONNECTION_CLOSED` –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

---

## üêõ –ß—Ç–æ –±—ã–ª–æ –Ω–µ —Ç–∞–∫:

### –ü—Ä–æ–±–ª–µ–º–∞:
–ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä—è–¥–∞ (`/api/v1/analyze/timeseries`) —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ–±—Ä—ã–≤–∞–ª–æ—Å—å:
```
Failed to load resource: net::ERR_CONNECTION_CLOSED
```

### –ü—Ä–∏—á–∏–Ω—ã:
1. **–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ç–æ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö** (20 —Ç–æ—á–µ–∫) - –¥–æ–ª–≥–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
2. **Timeout 90 —Å–µ–∫—É–Ω–¥** - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –¥–æ–ª–≥–∏—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
3. **Backend –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ** - nginx –æ—Ç–∫–ª—é—á–∞–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

---

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. **–£–º–µ–Ω—å—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö**
```python
# –ë–´–õ–û (‚ùå):
max_points = 20  # –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ, –¥–æ–ª–≥–æ

# –°–¢–ê–õ–û (‚úÖ):
max_points = 10  # –ë—ã—Å—Ç—Ä–µ–µ, –Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
```

### 2. **–£–≤–µ–ª–∏—á–µ–Ω—ã –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏**
```python
# –ë–´–õ–û (‚ùå):
if days_diff <= 30:
    interval = max(5, days_diff // max_points)  # –ö–∞–∂–¥—ã–µ 5 –¥–Ω–µ–π

# –°–¢–ê–õ–û (‚úÖ):
if days_diff <= 30:
    interval = max(7, days_diff // max_points)  # –ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é
elif days_diff <= 90:
    interval = max(14, days_diff // max_points)  # –ö–∞–∂–¥—ã–µ 2 –Ω–µ–¥–µ–ª–∏
elif days_diff <= 180:
    interval = max(21, days_diff // max_points)  # –ö–∞–∂–¥—ã–µ 3 –Ω–µ–¥–µ–ª–∏
else:
    interval = max(30, days_diff // max_points)  # –ï–∂–µ–º–µ—Å—è—á–Ω–æ
```

### 3. **–£–≤–µ–ª–∏—á–µ–Ω timeout –≤ frontend**
```javascript
// –ë–´–õ–û (‚ùå):
// –ù–µ –±—ã–ª–æ —è–≤–Ω–æ–≥–æ timeout, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è default 90 —Å–µ–∫—É–Ω–¥

// –°–¢–ê–õ–û (‚úÖ):
timeout: 300000 // 5 –º–∏–Ω—É—Ç –¥–ª—è –¥–æ–ª–≥–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
```

---

## üéØ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. ‚úÖ –ú–µ–Ω—å—à–µ —Ç–æ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö ‚Üí –±—ã—Å—Ç—Ä–µ–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞
2. ‚úÖ –ë–æ–ª—å—à–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –¥–∞—Ç–∞–º–∏ ‚Üí –º–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Sentinel
3. ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π timeout ‚Üí –Ω–µ –æ–±—Ä—ã–≤–∞–µ—Ç—Å—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
4. ‚úÖ Backend —É—Å–ø–µ–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å
5. ‚úÖ –ì—Ä–∞—Ñ–∏–∫ —Å—Ç—Ä–æ–∏—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤:

| –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç | –ò–Ω—Ç–µ—Ä–≤–∞–ª | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ | –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
|--------------|----------|------------------|-----------------|
| 30 –¥–Ω–µ–π | 7 –¥–Ω–µ–π | ~4 —Ç–æ—á–∫–∏ | ~30 —Å–µ–∫—É–Ω–¥ |
| 90 –¥–Ω–µ–π | 14 –¥–Ω–µ–π | ~6 —Ç–æ—á–µ–∫ | ~60 —Å–µ–∫—É–Ω–¥ |
| 180 –¥–Ω–µ–π | 21 –¥–µ–Ω—å | ~8 —Ç–æ—á–µ–∫ | ~90 —Å–µ–∫—É–Ω–¥ |
| 365 –¥–Ω–µ–π | 30 –¥–Ω–µ–π | ~12 —Ç–æ—á–µ–∫ | ~120 —Å–µ–∫—É–Ω–¥ |

---

## üì± –ö–ê–ö –¢–ï–°–¢–ò–†–û–í–ê–¢–¨:

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç:
```
https://bb512db09da9.ngrok-free.app
```

### 2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞:
`Ctrl + Shift + R`

### 3. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É

### 4. –ù–∞—Ä–∏—Å—É–π—Ç–µ –ø–æ–ª–µ –Ω–∞ –∫–∞—Ä—Ç–µ

### 5. –ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑ –¥–∏–Ω–∞–º–∏–∫–∏" (üìà)

### 6. –í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—ã:
- **–ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞**: –Ω–∞–ø—Ä–∏–º–µ—Ä, 3 –º–µ—Å—è—Ü–∞ –Ω–∞–∑–∞–¥
- **–ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞**: —Å–µ–≥–æ–¥–Ω—è
- **–ò–Ω–¥–µ–∫—Å**: NDVI (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### 7. –ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏–∫—É"

### 8. –î–æ–∂–¥–∏—Ç–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (30-120 —Å–µ–∫—É–Ω–¥):
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫ –¥–æ–ª–∂–µ–Ω –ø–æ—Å—Ç—Ä–æ–∏—Ç—å—Å—è
- ‚úÖ –ü–æ–∫–∞–∑–∞–Ω—ã —Ç–æ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–æ–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ CSV

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ:

### –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç:
- **–î–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç** (–±–æ–ª—å—à–µ ‚Üí –¥–æ–ª—å—à–µ)
- **–û–±–ª–∞—á–Ω–æ—Å—Ç–∏** (–º–Ω–æ–≥–æ –æ–±–ª–∞–∫–æ–≤ ‚Üí –±–æ–ª—å—à–µ –ø–æ–ø—ã—Ç–æ–∫)
- **–†–∞–∑–º–µ—Ä–∞ –ø–æ–ª—è** (–±–æ–ª—å—à–µ ‚Üí –¥–æ–ª—å—à–µ)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- ‚úÖ –î–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ç–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **3 –º–µ—Å—è—Ü–∞**
- ‚úÖ –ù–µ –≤—ã–±–∏—Ä–∞–π—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω > 1 –≥–æ–¥–∞ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞
- ‚úÖ –ï—Å–ª–∏ –¥–æ–ª–≥–æ - –ø–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ 5 –º–∏–Ω—É—Ç

---

## üîç –ï—Å–ª–∏ –≤—Å—ë –µ—â—ë –æ—à–∏–±–∫–∞:

### –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12):
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Network" (–°–µ—Ç—å)
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ "–ê–Ω–∞–ª–∏–∑ –¥–∏–Ω–∞–º–∏–∫–∏"
3. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å `/api/v1/analyze/timeseries`
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å:
   - **200 OK** - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!
   - **500** - –æ—à–∏–±–∫–∞ backend (–ø—Ä–æ–±–ª–µ–º–∞ —Å Sentinel)
   - **timeout** - –Ω—É–∂–Ω–æ –µ—â—ë —É–≤–µ–ª–∏—á–∏—Ç—å timeout

---

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. ‚úÖ `backend/api/routes.py` - —É–º–µ–Ω—å—à–µ–Ω—ã —Ç–æ—á–∫–∏, —É–≤–µ–ª–∏—á–µ–Ω—ã –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
2. ‚úÖ `frontend/src/components/TimeSeriesModal.jsx` - —É–≤–µ–ª–∏—á–µ–Ω timeout –¥–æ 5 –º–∏–Ω—É—Ç

---

## ‚úÖ –ì–û–¢–û–í–û!

**Frontend –∏ Backend –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω—ã!**

### –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:

```
https://bb512db09da9.ngrok-free.app
```

1. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à**: `Ctrl + Shift + R`
2. **–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É**
3. **–ù–∞—Ä–∏—Å—É–π—Ç–µ –ø–æ–ª–µ**
4. **–û—Ç–∫—Ä–æ–π—Ç–µ "–ê–Ω–∞–ª–∏–∑ –¥–∏–Ω–∞–º–∏–∫–∏"** (üìà)
5. **–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞**
6. **–ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å"**
7. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 30-90 —Å–µ–∫—É–Ω–¥**

**–ì—Ä–∞—Ñ–∏–∫ –¥–æ–ª–∂–µ–Ω –ø–æ—Å—Ç—Ä–æ–∏—Ç—å—Å—è! üéâ**

**–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç - –æ—Ç–ª–∏—á–Ω–æ!**  
**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ (F12) –∏ —Å–æ–æ–±—â–∏—Ç–µ!**

